<!DOCTYPE html>
<html>
<head>
	<title>GifTastic</title>
  <style type="text/css">
    button,
    div,
    form,
    input {
      margin: 10px;
    }
  </style>
	
	<!-- <link rel="stylesheet" type="text/css" href="assets/css/reset.css"> -->
  <link rel="stylesheet" type="text/css" href="assets/style.css">
</head>
<body>

  <div class="container">
    
    <div id="buttons-view"></div>



    <form id="animal-form">
      <label for="animal-input">Add an animal</label>
      <input type="text" id="animal-input">

      <input id="add-animal" type="submit" value="Add an Animal">
    </form>
    <div id="animals-view"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

    var animals = ["cat", "dog", "angry-panda", "elephant", "baby-animals", "lizard", "frog", "bear", "polar-bear", "monkey", "fish"];

        function displayAnimals (){
          $("#animals-view").empty();
      var animal = $(this).attr("data-name");
      var queryURL = "http://api.giphy.com/v1/gifs/search?q=" + animal + "&api_key=739fbcca0f7e4fd694a10d1708e3f2f2&limit=10";
      
        $.ajax({
        url: queryURL,
        method: "GET"
      }).done(function(response){
      for (var j = 0; j < 11; j++) {
          
          var animalDiv = $("<div class='animal'>");

          var rating = (response.data[j].rating);

          var pOne = $("<p>").text("Rating: " + rating);

          animalDiv.append(pOne);

         
          

          var imgURL = response.data[j].images.downsized_still.url;

          var pTwo = $("<img>").attr("src", imgURL);

          animalDiv.append(pTwo);

          $("#animals-view").append(animalDiv);

        }

        });

    

    }

    function renderButtons(){

      $("#buttons-view").empty();

      for (var i = 0; i < animals.length; i++){
        
        var a = $("<button>");

        a.addClass("animal");
        a.attr("data-name", animals[i]);
        a.text(animals[i]);

        $("#buttons-view").prepend(a);
      }
    }

    $("#add-animal").on("click", function(event) {
      event.preventDefault();

      var animal = $("#animal-input").val();

      animals.push(animal);
      console.log("I am here" + animals);

      renderButtons();
    });

$(document).on("click", ".animal", displayAnimals);

      // Calling the renderButtons function to display the intial buttons
      renderButtons();



  

    














  
  </script>

<!-- http://api.giphy.com/v1/gifs/search?q=funny+cat&api_key=739fbcca0f7e4fd694a10d1708e3f2f2&limit=10 -->
  </div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <title>GifTastic</title>
  <style type="text/css">
    button,
    div,
    form,
    input {
      margin: 10px;
    }
  </style>
  
  <link rel="stylesheet" type="text/css" href="assets/reset.css">
  <link rel="stylesheet" type="text/css" href="assets/style.css">
</head>
<body>

  <div class="container">
    
    <div id="buttons-view"></div>



    <form id="animal-form">
      <label for="animal-input">Add an animal</label>
      <input type="text" id="animal-input">

      <input id="add-animal" type="submit" value="Add an Animal">
    </form>
    <div id="animals-view"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">
    var animals = ["cat", "dog", "angry-panda", "elephant", "baby-animals", "lizard", "frog", "bear", "polar-bear", "monkey",];
        function displayAnimals (){
          $("#animals-view").empty();
      var animal = $(this).attr("data-name");
      var queryURL = "http://api.giphy.com/v1/gifs/search?q=" + animal + "&api_key=739fbcca0f7e4fd694a10d1708e3f2f2&limit=10";
      
        $.ajax({
        url: queryURL,
        method: "GET"
      }).done(function(response){
      for (j=0; j<11;j++) {
          
          var animalDiv = $("<div class='animal'>");
          var rating = response.data[j].rating;
          var pOne = $("<p>").text("Rating: " + rating);
          animalDiv.append(pOne);
          $("#animals-view").append(animalDiv);
         
          
          var imageDiv = $("<div>");
          var stillURL = response.data[j].images.original_still.url;
          var animateURL = response.data[j].images.original.url;
          var pTwo = $("<img>").attr("src", stillURL);
          pTwo.attr("data-state","still");
      pTwo.attr("data-still",stillURL);
      pTwo.attr("data-animate",animateURL);
            pTwo.addClass("image");
            
          imageDiv.append(pTwo);
          
          $("#animals-view").append(imageDiv);
        }
        });
      $(document).on('click',".image", function(){
    var state = $(this).attr("data-state");
    if(state === "still"){
      $(this).attr("src", $(this).attr("data-animate"));
      $(this).attr("data-state", "animate");
    }else{
      $(this).attr("src", $(this).attr("data-still"));
      $(this).attr("data-state", "still");
    }
  });
    
    }
    function renderButtons(){
      $("#buttons-view").empty();
      for (var i = 0; i < animals.length; i++){
        
        var a = $("<button>");
        a.addClass("animal");
        a.attr("data-name", animals[i]);
        a.text(animals[i]);
        $("#buttons-view").prepend(a);
      }
    }
    $("#add-animal").on("click", function(event) {
      event.preventDefault();
      var animal = $("#animal-input").val();
      animals.push(animal);
      console.log("I am here" + animals);
      renderButtons();
    });
$(document).on("click", ".animal", displayAnimals);
      // Calling the renderButtons function to display the intial buttons
      renderButtons();
  
    
  
  </script>
  </div>
</body>
</html>
